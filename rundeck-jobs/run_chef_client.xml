<joblist>
  <job>
    <id>c6f5a306-9714-4369-80b0-38d1f1289b66</id>
    <loglevel>INFO</loglevel>
    <multipleExecutions>true</multipleExecutions>
    <sequence keepgoing='false' strategy='node-first'>
      <command>
        <exec>cd /home/ubuntu/chef-repo; knife node run_list add node1 '${option.Role}'</exec>
      </command>
      <command>
        <exec>cd /home/ubuntu/chef-repo; "sudo chef-client"</exec>
    </sequence>
    <description>This job bootstraps a node against a chef environment. This will also create tags required for rundeck</description>
    <name>register_node_on_chef_server</name>
    <context>
      <options>
        <option name='Host_Name' required='true'>
          <description>(enter the host name of the VM to add role)</description>
        </option>
        <option name='Role' valuesUrl='file:/home/ubuntu/chef-repo/rundeck-jobs/roles.json' enforcedvalues='true' required='true'>
          <description>select the role on the chef-server to run the cookbooks</description>
        </option>
        </option>
      </options>
    </context>
    <uuid>c6f5a306-9714-4369-80b0-38d1f1289b66</uuid>
    <group>install/Chef</group>
  </job>
</joblist>
